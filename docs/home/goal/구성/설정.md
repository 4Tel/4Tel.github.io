---
sidebar_position: 2
toc_max_heading_level: 2
---
import comment from '!!raw-loader!@site/src/components/Comments.tsx';

# 프로그램 설정
## VS code 설치
* [설치](https://code.visualstudio.com/download)
* 최신 버전 검색 후 설치
* 파일 > 기본 설정 > 프로필 > 템플릿
	* Node.js 생성
	* DocWriter 생성.
## Node.js 설치
* 참고: [코딩애플](https://codingapple.com/unit/react1-install-create-react-app-npx/)
* LTS(v22)와 newer version(v23) 모두 작동하지 않았음.
* 아무런 에러 코드 없이 동작이 실패함.
* [Node.js Release](https://nodejs.org/en/about/previous-releases)에서 v20 설치하여 사용하여 해결.
## Docusaurus 설치
* 참고: [Docusaurus](https://docusaurus.io/docs)
* 폴더 생성 > vscode로 열기
* new terminal에서 명령 실행
```bash
# 설치만 하기
npm install docusaurus
```
```bash
# 설치 및 설정 하기
# my-website 대신 . 사용 불가능. 무조건 폴더를 생성한 뒤 프로젝트를 생성함
# JavaScript와 TypeScript 중 편의대로 선정.
npx create-docusaurus@latest my-website classic
cd my-website
```
```bash
# 실행하기
npm start
```
## Github 설정
1. [유저명].github.io 저장소 생성
1. gh-pages 브랜치 생성
1. 설정 > Pages > Branch를 gh-pages로 설정.
1. 로컬에서 테스트 `npm run`
1. 배포
	* `docusaurus build` 및 `docusaurus deploy` 명령
	* 자동화: github actions로 배포 [방법](https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions) 및 [참고](https://github.com/4Tel/4Tel.github.io/blob/main/.github/workflows/deploy.yml)

## 블로그 설정
### docusaurus.config.ts 설정
* [설정](https://github.com/4Tel/4Tel.github.io/blob/main/docusaurus.config.ts) 참고.
* blog metadata, theme, config로 분리하여 설정.
* Home을 Home 문서로 설정.
	* config - presets - docs - routeBasePath를 '/'로 설정.
	* Home 문서에 slug를 '/'로 설정.
* 수식 사용 [설정](https://docusaurus.io/ko/docs/2.x/markdown-features/math-equations#configuration)
### src 설정
* FIXME: break URL from private rpeository
* [MDX 설정](https://github.com/4Tel/4Tel.github.io/blob/main/src/theme/MDXComponents.tsx)
	* src/theme에 MDXComponents.tsx를 작성하면 자동 반영.
	* markdown 문서에서 함수를 import하지 않고 사용 가능.
* [설정 파일](https://github.com/4Tel/4Tel.github.io/blob/main/src/components)
* Card 설정
	* 버튼 형식의 link 제공.
	* [사용 예제](/home/Ex/Custom#card)
* Glossary 설정
	* 호버 시 설명 제공.
	* 클릭 시 설명 고정/해제.
	* 빨간색 밑줄로 구분.
	* [사용 예제](/home/Ex/Custom#glossary)
	* 또는 플러그인 사용 [방법](https://github.com/grnet/docusaurus-terminology)
* Highlight 설정
	* 배경색 또는 글자색 설정 가능.
	* [사용 예제](/home/Ex/Custom#highlight)

## sitemap 설정 (TODO)
* 검색엔진 노출에 용이하도록 sitemap.xml을 생성
* [설정 방법](https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-sitemap)
* default 설정이 있으므로 추가 설정이 필수가 아님.
* default 설정과 추가 설정을 구별하기 위해 id 설정 필요.

## Google Analytics 설정
### 기능
* 방문자 통계 확인 및 분석 가능
* Google에서 제공하는 추가 기능 사용 가능.
### 설정 방법
1. [Google Analytics](https://analytics.google.com/) 접속
1. 설정(관리) > 계정, 속성, 데이터 스트림 생성.
1. 데이터 스트림 > 측정 ID를 docusaurus.config.ts에 붙여넣기. [방법](https://docusaurus.io/ko/docs/api/plugins/@docusaurus/plugin-google-gtag)
* 반응이 늦을 수 있음.
* <Glossary id="Google Analytics 연결 테스트 방법"/>
### SEO (TODO)

## 댓글 기능
* [참고](https://velog.io/@outstandingboy/Github-블로그에-댓글-기능-추가하기-ft.-Utterances)
* Utterances 사용
	* Github Issue를 댓글로 사용.
	* 댓글을 작성하기 위해서는 Github 계정 및 저장소 필요
	* 영어만 지원
* Giscus 사용
    * Github Discussions을 댓글로 사용.
	* 댓글을 작성하기 위해서는 Github 계정 및 저장소 필요
	* 다국어 지원. (한국어 포함)
* 두 앱 간 유의미한 차이는 없는 것으로 보임.
### 1. Github Apps 접속
* [Utterances Apps](https://github.com/apps/utterances)
* [Giscus Apps](https://github.com/apps/giscus)
* 또는 직접 접속
1. Github 접속
2. 우측 상단 메뉴
3. MarketPlace 클릭
4. Utterances/Giscus 검색
### 2. Install
1. Install 클릭
2. Issue/Discussion를 처리할 저장소 선택
   * 다른 사용자가 보기 위해선 Public이어야 함.
   * 필요한 경우 새로 생성.
   * Giscus의 경우 저장소 설정에서 Discussions을 활성화해야 함.
### 3. 설정
* 선택 후 나오는 설정 페이지에서 설정.
* repo에 저장소 입력.
* Blog Post \<-> Issue/Discussion Mapping 설정
  * 현재 설정은 URL 기반으로 설정.
  * pathname과 URL은 동등하게 설정할 것임.
  * URL이 바뀔 수 있으나 이는 최소화할 예정.
  * pathname으로 할 경우 localhost 테스트 시 동일 pathname 검색 문제.

설정값|기능|자동생성 여부
:-:|:-:|:-:
pathname|동일 사이트 / 사이트 내 경로명 기반 매핑.|:heavy_check_mark:
url|URL 기반 매핑.|:heavy_check_mark:
title|게시물 제목 기반 매칭|:heavy_check_mark:
`og:title`|metadata의 `og:title` 기반 매칭|:heavy_check_mark:
number|게시물에서 수동으로 issue/discussion 번호 지정.|:x:
term|단어를 지닌 issue/discussion 탐색(?)|임의 생성
* Issue Label / Discussion Category 설정 (필요한 경우)
* 테마 설정
### 4. 사이트 설정
* Enable Utterances의 코드를 사이트에 삽입.
* Docusaurus의 Blog 설정
  * `npm run swizzle @docusaurus/theme-classic BlogPostPaginator -- --wrap`로 swizzle 활성화.
  * `src/theme/BlogPostPaginator/index.tsx`에 Utterances/Giscus 설정 추가.
* Docusaurus의 Doc 설정
  * `npm run swizzle @docusaurus/theme-classic DocPaginator -- --wrap`로 swizzle 활성화.
  * `src/theme/DocPaginator/index.tsx`에 Utterances/Giscus 설정 추가.
<CodeBlock language="tsx" title="Comment.tsx">{comment}</CodeBlock>
